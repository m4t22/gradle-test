/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.5.1/samples
 */

plugins {
  id 'groovy'
  id 'codenarc'
  id "com.mooltiverse.oss.nyx" version "1.2.1"
}

nyx {
  releasePrefix = 'v'
  releaseTypes {
    enabled = [ 'mainline' ]
    items {
      mainline {
        gitTag = 'true'
      }
    }
  }

  commitMessageConventions {
    enabled = [ 'conventionalCommits' ]
    items {
      conventionalCommits {
        expression = '(?m)^(?<type>[a-zA-Z0-9_]+)(!)?(\\((?<scope>[A-Z0-9\\-]+)\\))?:( (?<title>.+))$(?s).*'
        bumpExpressions {
          major = '(?s)(?m)^[a-zA-Z0-9_]+(!|.*^(BREAKING( |-)CHANGE: )).*'
          minor = '(?s)(?m)^feat(?!!|.*^(BREAKING( |-)CHANGE: )).*'
          patch = '(?s)(?m)^fix(?!!|.*^(BREAKING( |-)CHANGE: )).*'
        }
      }
    }
  }
  stateFile = 'nyx-state.json'
}
